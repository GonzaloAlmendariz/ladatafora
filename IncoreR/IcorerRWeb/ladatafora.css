/* ============================================================
   La Datafora — variables base
   ============================================================ */
:root{
  --bg:#f9f7f3; --bg-soft:#f6f3ef; --text:#2b2b2b;
  --accent:#8a5a44; --accent2:#c7a47a; --link:#4a5d68; --border:#e0dcd5;
}

html, body{
  background:var(--bg);
  color:var(--text);
  line-height:1.7;
  font-family:"Inter","Source Sans Pro",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

h1,h2,h3,h4,h5{
  font-family:"Literata","Georgia",serif;
  color:var(--accent);
  font-weight:600;
  letter-spacing:-.02em;
}

/* ============================================================
   Enlaces
   ============================================================ */
a{ color:var(--link); text-decoration:none; transition:color .2s, background-color .2s; }
a:hover, a:focus{ color:#fff!important; background:var(--accent); border-radius:4px; }

/* ============================================================
   NAVBAR (Shiny + BS5 via bslib)
   ============================================================ */
.navbar, .navbar-dark, .navbar-light{
  background:var(--bg-soft)!important;
  border-bottom:1px solid var(--border);
}
.navbar .navbar-brand, .navbar .navbar-nav .nav-link{
  color:var(--text)!important; border-radius:4px; transition:background-color .2s,color .2s;
}
.navbar .navbar-nav .nav-link:hover, .navbar .navbar-nav .nav-link:focus{
  background:var(--accent); color:#fff!important;
}

/* ===============================
   NAVBAR (La Datafora refinado)
   =============================== */

/* color del título principal "INCOREr" */
.navbar-brand {
  color: var(--accent) !important;            /* marrón */
  font-weight: 600 !important;
}

/* color de los links en la barra (navbar-menu) */
.navbar-nav > li > a,
.navbar-nav .nav-link,
.navbar-nav .dropdown-toggle {
  color: var(--accent) !important;            /* marrón */
  font-weight: 500;
  transition: color .2s ease, background-color .2s ease;
}

/* al pasar el mouse o al estar activo */
.navbar-nav > li > a:hover,
.navbar-nav .nav-link:hover,
.navbar-nav .nav-link:focus,
.navbar-nav .nav-link.active {
  background-color: var(--bg-soft) !important;
  color: var(--accent) !important;
  border-radius: 6px;
}

/* menú desplegable (navbarMenu) */
.dropdown-menu {
  background-color: var(--bg-soft) !important;
  border: 1px solid var(--border);
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,.08);
}

/* items del menú desplegable */
.dropdown-menu .dropdown-item {
  color: var(--text) !important;             /* texto negro/marrón normal */
  font-weight: 500;
  transition: background-color .2s ease, color .2s ease;
}

/* hover/selección del menú desplegable */
.dropdown-menu .dropdown-item:hover,
.dropdown-menu .dropdown-item:focus {
  background-color: rgba(199,164,122,0.25) !important; /* resalte beige-marrón */
  color: var(--accent) !important;                     /* texto marrón */
}

/* ============================================================
   LAYOUT: sidebar izquierda “sticky” + contenido
   ============================================================ */
.sticky-sidebar{
  position:sticky; top:20px;
  background:var(--bg-soft);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px;
}
.muted{ color:#6a6a6a; }
.code-ish{ font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:.9rem; }

/* ============================================================
   Inputs (selectize, checkbox, numeric, text)
   ============================================================ */
.form-control, .selectize-input, .form-select{
  background:#f1eee9; border:1px solid var(--border)!important; border-radius:10px!important;
}
.selectize-input.focus, .form-control:focus, .form-select:focus{
  box-shadow:0 0 0 .15rem rgba(138,90,68,.25);
  border-color:var(--accent)!important;
}
.input-group-text{ background:var(--bg-soft); border:1px solid var(--border); }

/* Orden visual: se aplica con tu lógica en R, aquí solo estética */
.form-group{ margin-bottom:.75rem; }

/* Checkboxes y switches */
.form-check-input:checked{ background-color:var(--accent); border-color:var(--accent); }

/* ============================================================
   Botones — tamaño grande, centrados y consistentes
   ============================================================ */

.btn,
.action-button.btn,
.shiny-download-link.btn {
  font-size: 1.15rem;           /* un poco más grande */
  line-height: 1.35;
  padding: 0.9rem 1.8rem;       /* más alto y ancho */
  border-radius: 12px;
  box-shadow: 0 3px 8px rgba(0,0,0,.08);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 240px;             /* mantiene uniformidad */
  font-weight: 500;
  transition: all .25s ease-in-out;
}

/* Color y hover coherente con la paleta La Datafora */
.btn-primary,
.action-button.btn.btn-primary,
.shiny-download-link.btn.btn-primary {
  background-color: var(--accent) !important;
  border-color: var(--accent) !important;
  color: #fff !important;
}

.btn-primary:hover,
.action-button.btn.btn-primary:hover,
.shiny-download-link.btn.btn-primary:hover {
  background-color: #a56b45 !important;
  border-color: #a56b45 !important;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.14);
}

/* contenedor centrador */
.btn-center {
  display: flex;
  justify-content: center;
  gap: .75rem;
  margin-top: 1.8rem;
  margin-bottom: 1.8rem;
}

/* asegurar centrado también dentro de sidebars o tarjetas */
.sticky-sidebar .btn,
.result-card .btn {
  margin: 0 auto;
}

/* botones de datatables ligeramente más pequeños */
.dt-button {
  font-size: .95rem;
  padding: .5rem .9rem;
  border-radius: 8px;
}

/* === Botones centrados verticalmente === */
.btn-center-vertical {
  display: flex;
  flex-direction: column;       /* uno debajo del otro */
  align-items: center;          /* centrados horizontalmente */
  justify-content: center;      /* centrados verticalmente dentro del div */
  gap: 1.4rem;                  /* espacio entre botones */
  margin-top: 2rem;             /* margen superior */
  margin-bottom: 2rem;          /* margen inferior */
}

/* === Tamaño uniforme y proporciones === */
.btn-center-vertical .btn {
  min-width: 180px;             /* ancho mínimo coherente */
  padding: 12px 20px;           /* altura del botón */
  font-size: 15px;
  border-radius: 8px;
  text-align: center;
  transition: all 0.15s ease-in-out;
}

/* === Efecto visual al pasar el mouse === */
.btn-center-vertical .btn:hover {
  filter: brightness(1.05);
  transform: translateY(-1px);
}

/* === Asegura espacio dentro del sidebar === */
.sticky-sidebar {
  padding-bottom: 1rem;
}

/* ============================================================
   Tarjetas/Paneles colapsables (bslib::accordion)
   ============================================================ */
.accordion-button{
  background:var(--bg-soft); color:var(--text); border:1px solid var(--border);
  border-radius:10px!important;
}
.accordion-button:not(.collapsed){
  color:#fff; background:var(--accent);
}
.accordion-body{
  background:var(--bg-soft); border:1px solid var(--border); border-top:none;
  border-radius:0 0 10px 10px;
}

/* ============================================================
   Área de resultados (plot/tabla)
   ============================================================ */
.result-card{
  background:#fff; border:1px solid var(--border);
  border-radius:12px; padding:14px;
  box-shadow:0 2px 8px rgba(0,0,0,.06);
}
.quieto{ text-align:left; }

/* DataTable (DT) */
table.dataTable{
  background:#fff!important; border-radius:10px; overflow:hidden;
}
.dataTables_wrapper .dataTables_filter input{
  border:1px solid var(--border); border-radius:8px; background:#f1eee9;
}

/* ============================================================
   Código/Pre (para verbatim call-preview)
   ============================================================ */
pre, pre code{
  background:#f1eee9; border-radius:8px; border:1px solid var(--border);
  padding:1rem; font-size:.9rem;
}

/* ============================================================
   Iframe full page (por si incrustas algo)
   ============================================================ */
.iframe-fullpage{ position:relative; width:100%; height:90vh; margin:0; padding:0; overflow:hidden; background:#f8f8f8; box-shadow:0 4px 12px rgba(0,0,0,.1); }
.iframe-fullpage iframe{ position:absolute; top:0; left:0; width:100%; height:100%; border:none; display:block; }



/* ===== Parche de calce y bordes La Datafora ===== */

/* 1) Mismo radio/borde/padding en sidebar y tarjeta de resultado */
.sticky-sidebar,
.result-card{
  border: 1px solid var(--border) !important;
  border-radius: 12px !important;
  background: var(--bg-soft) !important;  /* si prefieres blanco: #fff */
  padding: 14px !important;
}

/* 2) Oculta esquinas internas: nada se “escapa” */
.result-card{
  overflow: hidden !important;
}

/* 3) Imagen del plot: llena el ancho y respeta el radio externo */
.result-card .shiny-image-output img,
.result-card img{
  display: block !important;
  width: 100% !important;
  height: auto !important;
  border-radius: 0 !important;   /* el radio ya lo pone la tarjeta */
}

/* 4) Overlay ajustado al mismo radio que la tarjeta */
.img-wrap{ position: relative; border-radius: 12px !important; }
.img-overlay{ border-radius: 12px !important; }

/* 5) Gaps del layout: controla gutters/padding para que no “asome” el bg */
.container-fluid{
  padding-left: 16px !important;
  padding-right: 16px !important;
}
.row{
  /* Bootstrap 5 usa esta var; si es BS3 no pasa nada (no rompe) */
  --bs-gutter-x: 24px;
}
[class*="col-"]{
  /* Fallback para BS3 (evita franjas raras entre columnas) */
  padding-left: 12px;
  padding-right: 12px;
}

/* 6) Título y secciones con márgenes suaves */
h1, h2, h3, h4, h5{
  margin-top: .25rem;
  margin-bottom: .75rem;
}

/* 7) Verbatim “En R” con borde y calce limpio */
#script, pre, pre code{
  background: #f1eee9 !important;
  border: 1px solid var(--border) !important;
  border-radius: 8px !important;
  padding: 1rem !important;
}

/* 8) Quita cajas blancas residuales de Bootstrap */
.panel, .panel-default, .well, .card, .card-body{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* 9) Botón primario acorde al acento */
.btn-primary, .btn-primary:hover, .btn-primary:focus, .btn-primary:active{
  background-color: var(--accent) !important;
  border-color: var(--accent) !important;
  color: #fff !important;
  box-shadow: 0 2px 6px rgba(0,0,0,.06) !important;
  border-radius: 12px !important;
}


/* ===== Ajuste fino de imagen dentro de .result-card ===== */

/* El contenedor no debe recortar la imagen */
.result-card {
  position: relative;
  background: var(--bg-soft) !important;   /* o #fff si prefieres */
  border: 1px solid var(--border) !important;
  border-radius: 12px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,.06) !important;
  padding: 0 !important;                 /* sin padding interno */
  overflow: hidden !important;
}

/* Si quieres margen interno solo para títulos o texto dentro */
.result-card > .content {
  padding: 14px !important;
}

/* Imagen: ocupa todo el ancho y deja que la altura fluya naturalmente */
.result-card img,
.result-card .shiny-image-output img {
  display: block !important;
  width: 100% !important;
  height: auto !important;               /* mantiene proporción */
  border-radius: 0 !important;
  margin: 0 !important;
}

/* El overlay respeta el mismo radio y se superpone sin cortar la imagen */
.img-wrap {
  position: relative;
  border-radius: 12px !important;
  width: 100%;
  height: auto;                          /* se ajusta al contenido */
}
.img-overlay {
  position: absolute;
  inset: 0;
  background: rgba(120,120,120,.35);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px !important;
}

/* Barra de carga centrada */
.bar {
  width: 60%; height: 10px;
  background: rgba(255,255,255,.6);
  border-radius: 999px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0,0,0,.2);
}
.bar > div {
  height: 100%; width: 40%;
  background: #6c757d;
  animation: loadbar 1.1s infinite ease-in-out;
}
@keyframes loadbar {
  0%   { transform: translateX(-100%) }
  50%  { transform: translateX(80%) }
  100% { transform: translateX(180%) }
}



/* ===== Loader minimalista debajo de "En R" ===== */
.mini-loader { margin-top: 8px; }
.mini-loader .mini-bar{
  width: 100%;
  height: 6px;
  background: var(--border);
  border-radius: 999px;
  overflow: hidden;
  position: relative;
}
.mini-loader .mini-bar > div{
  position: absolute;
  top: 0; left: -40%;
  width: 40%; height: 100%;
  background: var(--accent);
  animation: ldf-loadbar 1.1s infinite ease-in-out;
}

/* Por si el @keyframes general no existe o tiene otro nombre */
@keyframes ldf-loadbar {
  0%   { transform: translateX(0);   left: -40%; }
  50%  { transform: translateX(180%); left: 10%; }
  100% { transform: translateX(360%); left: 60%; }
}


/* ============================================================
   Corrección de altura dinámica para los gráficos
   ============================================================ */

/* Contenedor del plot */
.ldf-plot {
  width: 100%;
  height: auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Imagen del plot dentro del contenedor */
.ldf-plot img {
  width: 100% !important;
  height: auto !important;
  max-width: 100%;
  display: block;
  border-radius: 0 0 12px 12px;
}

/* Tarjeta del resultado */
.result-card {
  width: 100%;
  height: auto !important;
  padding: 0 !important;
  background: #fff !important;
  border: 1px solid var(--border) !important;
  border-radius: 12px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
  overflow: visible !important;
}

/* Asegura que no haya márgenes o overflow que recorten la imagen */
#img, #img img {
  height: auto !important;
  max-height: none !important;
  margin: 0;
  display: block;
}











